# Gemini CLI Agent ガイドライン

## 全般

- 回答は常に日本語にすること。
- ファイル末尾には改行を含めること。
- 一時的に作成するファイルは `tmp` ディレクトリ配下に作成すること。

## ツール利用

- リポジトリ情報は `git remote -v` で確認すること。
- `replace` ツールを使用する際は、より短い `old_string` で変更箇所を特定するか、`read_file` で事前に内容を詳細に確認し、正確な文字列を渡すように心がけること。
- GitHub API を使用する際は、公式ドキュメントを事前に確認し、パラメータの正確な指定方法を把握すること。

## 開発プラクティス

- 新しい機能を実装する際は、初期段階でエラーケースやデータ構造をより詳細に検討し、後からの大きなリファクタリングを減らすように努めること。
- 今後、より複雑な機能を実装する際には、テスト駆動開発（TDD）を導入し、エラーケースやエッジケースを網羅したテストを先に書くことで、品質と堅牢性を高めること。
- 開発初期段階からユーザー体験を考慮し、機能の要件定義をより詳細に行うこと。
- 外部 API へのリクエストを行う際は、レートリミットやエラーハンドリングについて事前に調査し、適切な対策を講じること。
- **CI/CDワークフローの初期確認:** プロジェクト開始時や新規機能開発の初期段階で、既存のCI/CDワークフローを確認し、テストが適切に設定されているかを検証すること。
- **コミットメッセージの規約統一と自動化:** プロジェクトのコミットメッセージの規約を明確にし、可能であればテンプレートやLintツールを導入して自動化を検討すること。
- プルリクエストを作成する際は、対応元になった Issue の番号を説明末尾に含めること。フォーマットは `fixed <Issue 番号>` （例: `fixed #1` ）形式とし、タイトルに Issue 番号は含めないこと。もし対応元の Issue がない場合は Issue 番号を含める必要はない。
- **テストの堅牢性向上**: `cobra` コマンドのテストでは、`Execute()` と `SetArgs()` を活用し、より実際のコマンド実行に近い形でテストを行うこと。また、グローバルな状態を変更するテストでは、`defer` を活用して状態を確実に元に戻すこと。ソースコードの変更時はテストが通るようにすること。
- **静的解析ツールの活用**: `go vet` などの静的解析ツールを開発プロセスに組み込み、コード品質を維持すること。
- **レビューコメントの活用**: レビューコメントを学びの機会として捉え、今後の開発に活かすこと。
- **ロジックの分離と単体テストの徹底:** 複雑なロジックは独立したヘルパー関数として抽出し、その関数を直接テストすることで、テストの堅牢性とコードのモジュール性を高めること。

## Go 言語固有

- `internal` パッケージの適切な利用方法や、エラーハンドリングのパターンなど、Go 言語のベストプラクティスについてさらに学習し、コード品質を向上させること。
- Go 言語の基本的なデータ構造（スライス、ポインタ）と組み込み関数の挙動について、より深く理解すること。

## 振り返り

- **YWTの活用:** 今後、振り返りはYWT（Yet, What, Try）を基本とすること。特に「What（わかったこと）」で具体的な学びや洞察を深掘りし、次の行動に繋げることを意識すること。
- **定期的な実施:** 開発プロセスの改善サイクルを回すために、定期的に振り返りを実施すること。