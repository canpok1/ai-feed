# コントリビューションガイド

ai-feedプロジェクトへの貢献を歓迎します！このガイドでは、プロジェクトに貢献する方法について説明します。

## 貢献の方法

### バグ報告

1. [Issues](https://github.com/canpok1/ai-feed/issues)で既存の問題を確認
2. 同じ問題が報告されていなければ、新しいIssueを作成
3. バグの詳細、再現手順、期待される動作を記載

### 機能提案

1. [Issues](https://github.com/canpok1/ai-feed/issues)で新しいIssueを作成
2. 提案する機能の概要と必要性を説明
3. 可能であれば実装方法の案も記載

### コードの貢献

プルリクエストを通じてコードを貢献できます。以下の手順に従ってください。

## 開発フロー

### 1. リポジトリのFork

1. GitHubで[ai-feed](https://github.com/canpok1/ai-feed)リポジトリにアクセス
2. 右上の「Fork」ボタンをクリック
3. 自分のアカウントにリポジトリをコピー

### 2. ローカル環境のセットアップ

```bash
# Forkしたリポジトリをクローン
git clone https://github.com/YOUR_USERNAME/ai-feed.git
cd ai-feed

# 上流リポジトリを追加
git remote add upstream https://github.com/canpok1/ai-feed.git

# 開発環境のセットアップ
make setup
```

詳細は[開発環境セットアップガイド](./00_development_setup.md)を参照してください。

### 3. ブランチの作成

```bash
# mainブランチを最新に更新
git checkout main
git pull upstream main

# 機能ブランチを作成
git checkout -b feature/your-feature-name

# またはバグ修正ブランチ
git checkout -b fix/bug-description
```

ブランチ名の規約：
- 機能追加: `feature/機能名`
- バグ修正: `fix/バグの説明`
- ドキュメント: `docs/ドキュメント名`
- リファクタリング: `refactor/対象`

### 4. コードの変更

#### 必須要件

1. **コーディングルールの遵守**
   - [コーディングルール](./01_coding_rules.md)を必ず確認
   - **コメントは全て日本語**で記述

2. **コミット前の必須チェック**
   ```bash
   # コードフォーマット（必須）
   make fmt
   
   # 静的解析（必須）
   make lint
   
   # テストの実行（必須）
   make test
   ```

3. **依存関係の管理**
   ```bash
   # 新しい依存関係を追加した場合
   go mod tidy
   ```

4. **モックの更新**
   ```bash
   # インターフェースを変更した場合
   make generate
   ```

### 5. コミット

#### コミットメッセージの規約

```
<type>: <subject>

<body>

<footer>
```

**type（必須）**:
- `feat`: 新機能
- `fix`: バグ修正
- `docs`: ドキュメントのみの変更
- `style`: コードの意味に影響しない変更（フォーマット等）
- `refactor`: バグ修正や機能追加を含まないコード変更
- `test`: テストの追加や修正
- `chore`: ビルドプロセスやツールの変更

**subject（必須）**:
- 変更内容の簡潔な説明
- 日本語で記述
- 50文字以内

**body（任意）**:
- 詳細な説明が必要な場合に記載
- 何を、なぜ変更したかを説明

**footer（任意）**:
- Issue番号の参照: `fixed #123`
- Breaking changeの記載

#### コミット例

```bash
# 新機能
git commit -m "feat: RSS取得のタイムアウト設定を追加

長時間応答のないフィードに対してタイムアウトを設定できるようにしました。
デフォルトは30秒で、config.ymlで変更可能です。

fixed #42"

# バグ修正
git commit -m "fix: Slack投稿時のエスケープ処理を修正

特殊文字を含むメッセージが正しく投稿されない問題を修正しました。"

# ドキュメント
git commit -m "docs: READMEにトラブルシューティング項目を追加"
```

### 6. プルリクエストの作成

#### 準備

```bash
# 変更をプッシュ
git push origin feature/your-feature-name

# 上流の変更を取り込む（必要な場合）
git fetch upstream
git rebase upstream/main
```

#### プルリクエストテンプレート

```markdown
## 概要
変更内容の概要を記載してください。

## 変更の種類
- [ ] バグ修正
- [ ] 新機能
- [ ] 破壊的変更
- [ ] ドキュメント更新

## 関連Issue
fixed #(issue番号)

## 変更内容
- 変更点1
- 変更点2
- 変更点3

## テスト
- [ ] 既存のテストが全てパス
- [ ] 新しいテストを追加（必要な場合）
- [ ] make lintが成功
- [ ] make fmtを実行済み

## スクリーンショット（UIの変更がある場合）
該当なし

## チェックリスト
- [ ] コーディングルールに従っている
- [ ] コメントは日本語で記載
- [ ] 適切なコミットメッセージ
- [ ] ドキュメントを更新（必要な場合）
```

#### プルリクエストのタイトル

- 変更内容を簡潔に表現
- Issue番号は含めない（説明文に記載）
- 例: `プロファイル検証機能の追加`

### 7. コードレビュー

#### レビューを受ける側

- レビューコメントには建設的に対応
- 修正が必要な場合は追加コミットで対応
- 議論が必要な場合はコメントで返信

#### レビューする側

- 建設的なフィードバックを心がける
- コードの動作だけでなく、可読性や保守性も確認
- 良い点も積極的にコメント

## コントリビューター向けの重要事項

### 必ず守るべきルール

1. **コミット前に必ず実行**
   ```bash
   make fmt    # コードフォーマット
   make lint   # 静的解析
   make test   # テスト
   ```

2. **日本語の使用**
   - コメントは全て日本語
   - コミットメッセージのsubjectとbodyは日本語
   - Issueやプルリクエストの記載も日本語

3. **テストの追加**
   - 新機能には必ずテストを追加
   - バグ修正には再発防止のテストを追加

4. **ドキュメントの更新**
   - APIやコマンドの変更時は必ずドキュメントを更新
   - 新機能はREADMEかdocs/に説明を追加

### 推奨事項

1. **小さなプルリクエスト**
   - 1つのプルリクエストは1つの目的に絞る
   - レビューしやすい適切なサイズに分割

2. **早めのドラフトPR**
   - 実装方針の確認が必要な場合はドラフトPRを作成
   - WIP（Work In Progress）を明記

3. **継続的な更新**
   - mainブランチの変更を定期的に取り込む
   - コンフリクトは早めに解決

## ライセンス

貢献されたコードは、プロジェクトのライセンス（MIT License）に従います。

## 質問・サポート

- 実装方法が不明な場合はIssueで質問
- Discussionsで議論も歓迎
- 日本語でのコミュニケーションを推奨

## 謝辞

ai-feedプロジェクトへの貢献に感謝します！皆様の協力により、より良いツールを提供できます。

## 関連ドキュメント

- [開発環境セットアップ](./00_development_setup.md)
- [コーディングルール](./01_coding_rules.md)
- [アーキテクチャ概要](./02_architecture.md)
- [テストガイド](./03_testing.md)